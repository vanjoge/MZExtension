var vpleModel={cacheByIDB:function(){this.db=new Dexie("MZCache");this.db.version(1).stores({cache:"key, html, ts"});this.getLocValue=function(e,t,s){this.db.cache.get(e,function(a){if(a==undefined){s(false);return}if(t==1){s(a.html);return}let i=a.ts;if(i!=-1){let e=new Date(i);let t=new Date;if(t.getUTCFullYear()==e.getUTCFullYear()&&t.getUTCMonth()==e.getUTCMonth()&&t.getUTCDate()==e.getUTCDate()){if(t.getUTCHours()>=1&&t.getUTCHours()<=22){}else if(t.getUTCHours()!=e.getUTCHours()){s(false);return}}else{s(false);return}s(a.html);return}else{s(false);return}})};this.setLocValue=function(e,t,a,i){let s=(new Date).getTime();if(a==1){let e=new Date;e.setDate(e.getDate()+30);s=e.getTime()}if(s>0){this.db.cache.put({key:e,html:t,ts:s}).then(function(e){i()})}else{i()}};this.clearCacheItem=function(e){this.db.cache.delete(e)};this.clearExpired=function(){let e=new Date(Date.now()-3600*1e3*24).getTime();this.db.cache.where("ts").below(e).delete()};this.clearAll=function(){this.db.cache.clear()}},cacheByGM:function(){this.getLocValue=function(s,e,l){s=md5(s);if(e==1){let e=GM_getValue(s,false);if(e){l(e);return}l(false);return}else{let i=GM_getValue("Dt_"+s,-1);if(i!=-1){let e=new Date(i);let t=new Date;if(t.getUTCFullYear()==e.getUTCFullYear()&&t.getUTCMonth()==e.getUTCMonth()&&t.getUTCDate()==e.getUTCDate()){if(t.getUTCHours()>=1&&t.getUTCHours()<=22){}else if(t.getUTCHours()!=e.getUTCHours()){l(false);return}}else{l(false);return}let a=GM_getValue(s,false);if(a){l(a);return}l(false);return}else{l(false);return}}};this.setLocValue=function(e,t,a,i){e=md5(e);let s=0;if(a==2){s=(new Date).getTime()}else if(a==1){let e=new Date;e.setDate(e.getDate()+30);s=e.getTime()}if(s>0){GM_setValue("Dt_"+e,s);GM_setValue(e,t)}i()};this.clearCacheItem=function(e){GM_deleteValue("Dt_"+e);GM_deleteValue(e)};this.clearExpired=function(e){let l=GM_listValues();let n=l.length;if(e){n=e}else if(l.length>100){n=100}for(let s=0;s<l.length;s++){let i;if(l[s].startsWith("Dt_")){i=GM_getValue(l[s],-1);let a=l[s].substring(3);if(i!=-1){let e=new Date(i);let t=new Date;if(t.getUTCFullYear()==e.getUTCFullYear()&&t.getUTCMonth()==e.getUTCMonth()&&t.getUTCDate()==e.getUTCDate()){continue}GM_deleteValue(l[s]);GM_deleteValue(a);n--;if(n<=0){break}}}}};this.clearAll=function(){this.clearExpired(100)};this.autoclearCache=function(){let e=GM_getValue("last_autoclear",0);let t=new Date(e);let a=new Date;if(a.getUTCFullYear()==t.getUTCFullYear()&&a.getUTCMonth()==t.getUTCMonth()&&a.getUTCDate()-t.getUTCDate()<3){return false}else{clearCache(100);GM_setValue("last_autoclear",a.getTime());return true}}},MatchEvent2:function(){this.data={};this.dataByPlayer={};this.playerFool={};this.longPass={};this.setData=function(e,r){this.match=e;let o=e.matchBuffer;let d={};let u={};let f={};let t={};let a={};r.out_of_play.resetIndex();let i;let h=0;let m={};let g={flag:false,data:{},begindown:false,state:0,owner:false};for(let n=0;n<o.length;n++){i=false;h=0;if(n-1>=0){if(o[n].ball.x==o[n-1].ball.x&&o[n].ball.y==o[n-1].ball.y&&o[n].ball.z==o[n-1].ball.z){i=false}else{i=true;h=o[n].ball.z-o[n-1].ball.z}}let l=o[n].players;for(let s=0;s<l.length;s++){if(l[s].status!=undefined){if(i&&r.out_of_play.notin(n)){if(t[l[s].id]==undefined){t[l[s].id]={};t[l[s].id].FoolStart=-1}else{if(t[l[s].id].x==l[s].position.x&&t[l[s].id].y==l[s].position.y&&t[l[s].id].z==l[s].position.z){if(t[l[s].id].FoolStart==-1){t[l[s].id].FoolStart=n-1;t[l[s].id].frame_count=0}t[l[s].id].frame_count++}else{if(t[l[s].id].FoolStart>0){if(a[l[s].id]==undefined){a[l[s].id]={};a[l[s].id].frame_count=0;a[l[s].id].data=new Array}let e={start:t[l[s].id].FoolStart,end:n-1,frame_count:t[l[s].id].frame_count};a[l[s].id].data.push(e);a[l[s].id].frame_count+=e.frame_count;t[l[s].id].FoolStart=-1;t[l[s].id].frame_count=0}}}t[l[s].id].x=l[s].position.x;t[l[s].id].y=l[s].position.y;t[l[s].id].z=l[s].position.z}if(g.flag&&g.owner.m_id==l[s].id){if(h<0){g.begindown=true;g.data.data.push(o[n].ball);g.data.end=n}else if(h==0&&o[n].ball.z<22||g.begindown&&(h>0||o[n].ball.z<22)){g.flag=false;let s=o[g.data.end].ball;let l=2e4,n=2e4;g.data.team=g.data.other=false;for(let e=0;e<o[g.data.end].players.length;e++){let i=o[g.data.end].players[e];if(i.position){let e;if(g.data.end>=r.m_ko2Frame){e=s.x-i.position.x}else{e=s.x-i.position.x}let t=s.y-i.position.y;let a=Math.sqrt(e*e+t*t);if(r.dit_player[i.id].m_side==g.owner.m_side){if(a<l){l=a;g.data.team={player:r.dit_player[i.id],gp:i,distance:a}}}else{if(a<n){n=a;g.data.other={player:r.dit_player[i.id],gp:i,distance:a}}}}}if(g.data.end>=r.m_ko2Frame){g.data.b=750-o[g.data.end].ball.x+","+(1e3-o[g.data.end].ball.y)+","+o[g.data.end].ball.z}else{g.data.b=o[g.data.end].ball.x+","+o[g.data.end].ball.y+","+o[g.data.end].ball.z}}else{g.data.data.push(o[n].ball);g.data.end=n}}if(l[s].status!=MatchStatus.BA_NORMAL){let e=r.dit_player[l[s].id];let t=e.m_side=="home"?true:false;if(g.flag==false){if(l[s].status==MatchStatus.BA_LEFT_FOOT_SHOT_FWD||l[s].status==MatchStatus.BA_RIGHT_FOOT_SHOT_FWD){if(g.data.end==n-1&&g.owner==e){g.flag=true;g.data.data.push(o[n].ball);g.data.end=n}else{if(n>=r.m_ko2Frame){g.data={h:"",a:750-o[n].ball.x+","+(1e3-o[n].ball.y)+","+o[n].ball.z,b:750-o[n].ball.x+","+(1e3-o[n].ball.y)+","+o[n].ball.z,start:n,end:n,data:[o[n].ball]}}else{g.data={h:"",a:o[n].ball.x+","+o[n].ball.y+","+o[n].ball.z,b:o[n].ball.x+","+o[n].ball.y+","+o[n].ball.z,start:n,end:n,data:[o[n].ball]}}g.state=0;g.begindown=false;g.flag=true;g.owner=e;if(m[l[s].id]==undefined){m[l[s].id]=new Array}m[l[s].id].push(g.data);m[l[s].id].owner=e}}}let a;if(u[l[s].status]==undefined){u[l[s].status]={};u[l[s].status][l[s].id]=a=new Array}else if(u[l[s].status][l[s].id]==undefined){u[l[s].status][l[s].id]=a=new Array}else{a=u[l[s].status][l[s].id]}let i=l[s].id+"_"+l[s].status+"_"+n;if(f[i]==undefined){a.push({m_frame:n,status:l[s].status,owner:e,isHome:t});f[i]=1}else{f[i]+=1}}if(d[l[s].id]==undefined){d[l[s].id]={}}if(d[l[s].id][n]==undefined){d[l[s].id][n]={}}d[l[s].id][n].data=l[s];d[l[s].id][n].ball_move=i;d[l[s].id][n].owner=o[n]}}}this.playerFool=a;let s={};let l={};this.data={};for(let a in u){if(s[a]==undefined){s[a]={}}if(this.data[a]==undefined){this.data[a]={}}for(let t in u[a]){if(l[t]==undefined){l[t]={};l[t].status=new Array;l[t].data=new Array}for(let e=0;e<u[a][t].length;e++){if(s[a][t]==undefined){s[a][t]={start:u[a][t][e].m_frame,last:u[a][t][e].m_frame,owner:u[a][t][e].owner,isHome:u[a][t][e].isHome}}else{if(s[a][t].last==u[a][t][e].m_frame-1){s[a][t].last=u[a][t][e].m_frame}else{if(this.data[a][t]==undefined){this.data[a][t]=new Array}this.data[a][t].push({m_frame_start:s[a][t].start,m_frame_end:s[a][t].last,owner:s[a][t].owner});l[t].data.push({m_frame_start:s[a][t].start,m_frame_end:s[a][t].last,status:parseInt(a)});s[a][t]={start:u[a][t][e].m_frame,last:u[a][t][e].m_frame,owner:u[a][t][e].owner,isHome:u[a][t][e].isHome}}}}}}for(let t in s){if(this.data[t]==undefined){this.data[t]={}}for(let e in s[t]){l[e].status.push(parseInt(t));if(this.data[t][e]==undefined){this.data[t][e]=new Array}l[e].owner=s[t][e].owner;l[e].isHome=s[t][e].isHome;this.data[t][e].push({m_frame_start:s[t][e].start,m_frame_end:s[t][e].last,owner:s[t][e].owner});l[e].data.push({m_frame_start:s[t][e].start,m_frame_end:s[t][e].last,status:parseInt(t)});l[e].data.sort(function(e,t){return e.m_frame_start-t.m_frame_start})}}this.dataByPlayer={};for(let s in l){this.dataByPlayer[s]={};this.dataByPlayer[s].isHome=l[s].isHome;this.dataByPlayer[s].owner=l[s].owner;this.dataByPlayer[s].status=l[s].status;this.dataByPlayer[s].data=new Array;let t=l[s].data;for(let e=0;e<t.length;e++){if(e+1<t.length){if(t[e].m_frame_end+1==t[e+1].m_frame_start){if(t[e].status==MatchStatus.BA_HEADER){if(t[e+1].status==MatchStatus.BA_LEFT_FOOT_SHOT_FWD){this.dataByPlayer[s].data.push({m_frame_start:t[e].m_frame_start,m_frame_end:t[e+1].m_frame_end,status:1001,old_arr:[t[e],t[e+1]]});e+=1;continue}else if(t[e+1].status==MatchStatus.BA_RIGHT_FOOT_SHOT_FWD){this.dataByPlayer[s].data.push({m_frame_start:t[e].m_frame_start,m_frame_end:t[e+1].m_frame_end,status:1002,old_arr:[t[e],t[e+1]]});e+=1;continue}else if(t[e+1].status==MatchStatus.BA_BALL_OWNER){this.dataByPlayer[s].data.push({m_frame_start:t[e].m_frame_start,m_frame_end:t[e+1].m_frame_end,status:1003,old_arr:[t[e],t[e+1]]});e+=1;continue}}if(t[e].status==MatchStatus.BA_TACKLE){if(t[e+1].status==MatchStatus.BA_LEFT_FOOT_SHOT_FWD||t[e+1].status==MatchStatus.BA_RIGHT_FOOT_SHOT_FWD||t[e+1].status==MatchStatus.BA_BALL_OWNER){this.dataByPlayer[s].data.push({m_frame_start:t[e].m_frame_start,m_frame_end:t[e].m_frame_end,status:1011,old_arr:[t[e]]});continue}}}}this.dataByPlayer[s].data.push(t[e])}this.dataByPlayer[s].FoolCount=0;for(let i=0;i<this.dataByPlayer[s].data.length;i++){let e=this.dataByPlayer[s].data[i];e.FoolCount=0;if(i+1<this.dataByPlayer[s].data.length&&this.dataByPlayer[s].data[i+1].m_frame_start==e.m_frame_end+1){continue}let t=e.m_frame_start;let a=d[s][t];t++;while(a!=undefined&&d[s][t]!=undefined){if(d[s][t].data.position.x==a.data.position.x&&d[s][t].data.position.y==a.data.position.y){e.FoolCount++;a=d[s][t];t++}else{break}}this.dataByPlayer[s].FoolCount+=e.FoolCount}}this.longPass=m};this.tolog=function(){let o=new Array;for(let r in this.longPass){this.longPass[r].mstat={};for(let e=0;e<this.longPass[r].length;e++){let n=this.longPass[r][e];if(n.team){n.h="[";n.team.events=this.getPlayerEventById(n.team.player.m_id,n.start,n.end);for(let t=0;t<n.team.events.length;t++){if(t>0){n.h+=","}n.h+=vgm.getMatchStatusName(n.team.events[t].status);if(n.team.events[t].status==1001||n.team.events[t].status==1002){let e=0;if(n.end<=vgm.m_htFrame){e=1}else if(n.end>=vgm.m_ko2Frame&&n.end<=vgm.m_ht2Frame){e=2}else if(n.end>=vgm.m_ko3Frame&&n.end<=vgm.m_ht3Frame){e=3}else if(n.end>=vgm.m_ko4Frame&&n.end<=vgm.m_ht4Frame){e=4}o.push({h:n.team.player.m_side,d:e,s:n.team.events[t].status,b:this.match.matchBuffer[n.end].ball,p:n.team.gp.position})}}n.h+="|";n.other.events=this.getPlayerEventById(n.other.player.m_id,n.start,n.end);for(let e=0;e<n.other.events.length;e++){if(e>0){n.h+=","}n.h+=vgm.getMatchStatusName(n.other.events[e].status)}n.h+="][";let e=this.match.matchBuffer[n.end].ball;let t=this.match.matchBuffer[n.start].ball;let a=0,i=0,s=0,l=0;if(n.end>=vgm.m_ko2Frame){a=n.team.gp.position.x-e.x;i=n.team.gp.position.y-e.y;s=n.other.gp.position.x-e.x;l=n.other.gp.position.y-e.y}else{a=e.x-n.team.gp.position.x;i=e.y-n.team.gp.position.y;s=e.x-n.other.gp.position.x;l=e.y-n.other.gp.position.y}n.h+=a+","+i+","+n.team.distance.toFixed(2)+";"+s+","+l+","+n.other.distance.toFixed(2)+"]"+(t.x-e.x)+","+(t.y-e.y)+","+(t.z-e.z);if(this.longPass[r].mstat[n.team.player.m_id]==undefined){this.longPass[r].mstat[n.team.player.m_id]={X:new vpleModel.MyMathArr,Y:new vpleModel.MyMathArr}}this.longPass[r].mstat[n.team.player.m_id].X.data.push(a);this.longPass[r].mstat[n.team.player.m_id].Y.data.push(i)}}for(let e in this.longPass[r].mstat){this.longPass[r].mstat[e].X.cal();this.longPass[r].mstat[e].Y.cal()}}console.log(this.longPass);let t="";for(let e=0;e<o.length;e++){t+=o[e].h+"\t"+o[e].d+"\t"+o[e].s+"\t"+o[e].b.x+"\t"+o[e].b.y+"\t"+o[e].b.z+"\t"+o[e].p.x+"\t"+o[e].p.y+"\t"+o[e].p.z+"\n"}console.log(t)};this.getPlayerEventById=function(a,i,s){let l=new Array;if(this.dataByPlayer[a]){for(let t=0;t<this.dataByPlayer[a].data.length;t++){let e=this.dataByPlayer[a].data[t];if(i<=e.m_frame_start&&e.m_frame_start<=s){l.push(e)}if(s<e.m_frame_start){return l}}}return l}},MyMathArr:function(){this.data=new Array;let e=function(e,t){return e+t};let a=function(e){return e*e};this.cal=function(){let t=this.data.reduce(e)/this.data.length;this.avg=t;this.deviations=this.data.map(function(e){return e-t});this.stddev=Math.sqrt(this.deviations.map(a).reduce(e)/(this.data.length-1));this.max=Math.max.apply(null,this.data);this.min=Math.min.apply(null,this.data);this.CV=this.stddev/this.avg}},tacCof:{GK:{ID:6,Name:"门将",SubCB:false,SubAtt:false,SubMF:false,SubExt:false,PRI:19,XMin:0,YMin:0,XMax:0,YMax:0,Speed:{90:15,100:20},Stamina:{90:20,100:25},Gameintelligence:{90:20,100:25},Passing:{100:1},Shooting:{},Heading:{},Goalkeeping:{90:40,100:50},Technique:{100:3},Tackling:{},Highpassing:{100:3},Situations:{100:12},Experience:{100:30},Form:{100:15}},CB:{ID:7,Name:"中卫",SubCB:true,SubAtt:false,SubMF:false,SubExt:false,PRI:16,XMin:281,YMin:658,XMax:715,YMax:1200,Speed:{100:18},Stamina:{100:18},Gameintelligence:{100:18},Passing:{100:8},Shooting:{},Heading:{100:15},Goalkeeping:{},Technique:{100:13},Tackling:{80:50,90:55,100:60},Highpassing:{100:10},Situations:{},Experience:{100:30},Form:{100:15}},RSB:{ID:9,Name:"右边卫",SubCB:false,SubAtt:false,SubMF:false,SubExt:false,PRI:13,XMin:716,YMin:658,XMax:1200,YMax:1200,Speed:{100:18},Stamina:{100:18},Gameintelligence:{100:15},Passing:{100:10},Shooting:{},Heading:{100:15},Goalkeeping:{},Technique:{100:15},Tackling:{100:40},Highpassing:{100:20},Situations:{},Experience:{100:30},Form:{100:15}},LSB:{ID:8,Name:"左边卫",SubCB:false,SubAtt:false,SubMF:false,SubExt:false,PRI:13,XMin:0,YMin:658,XMax:280,YMax:1200,Speed:{100:18},Stamina:{100:18},Gameintelligence:{100:15},Passing:{100:10},Shooting:{},Heading:{100:15},Goalkeeping:{},Technique:{100:15},Tackling:{100:40},Highpassing:{100:20},Situations:{},Experience:{100:30},Form:{100:15}},RM:{ID:12,Name:"右边中场",SubCB:false,SubAtt:false,SubMF:false,SubExt:false,PRI:12,XMin:800,YMin:502,XMax:1200,YMax:657,Speed:{100:18},Stamina:{100:18},Gameintelligence:{100:18},Passing:{100:15},Shooting:{100:1},Heading:{100:10},Goalkeeping:{},Technique:{100:15},Tackling:{100:40},Highpassing:{100:40},Situations:{},Experience:{100:30},Form:{100:15}},LM:{ID:12,Name:"左边中场",SubCB:false,SubAtt:false,SubMF:false,SubExt:false,PRI:12,XMin:0,YMin:502,XMax:201,YMax:657,Speed:{100:18},Stamina:{100:18},Gameintelligence:{100:18},Passing:{100:15},Shooting:{100:1},Heading:{100:10},Goalkeeping:{},Technique:{100:15},Tackling:{100:40},Highpassing:{100:40},Situations:{},Experience:{100:30},Form:{100:15}},CDM:{ID:10,Name:"后腰",SubCB:false,SubAtt:false,SubMF:false,SubExt:true,PRI:15,XMin:202,YMin:502,XMax:799,YMax:657,Speed:{100:18},Stamina:{100:20},Gameintelligence:{100:30},Passing:{100:15},Shooting:{100:3},Heading:{100:15},Goalkeeping:{},Technique:{100:20},Tackling:{100:40},Highpassing:{100:40},Situations:{},Experience:{100:30},Form:{100:15}},LMF:{ID:13,Name:"左边前卫",SubCB:false,SubAtt:false,SubMF:false,SubExt:false,PRI:11,XMin:0,YMin:347,XMax:201,YMax:501,Speed:{100:25},Stamina:{100:18},Gameintelligence:{100:15},Passing:{100:20},Shooting:{100:10},Heading:{100:2},Goalkeeping:{},Technique:{100:20},Tackling:{100:10},Highpassing:{100:30},Situations:{},Experience:{100:30},Form:{100:15}},RMF:{ID:14,Name:"右边前卫",SubCB:false,SubAtt:false,SubMF:false,SubExt:false,PRI:11,XMin:800,YMin:347,XMax:1200,YMax:501,Speed:{100:25},Stamina:{100:18},Gameintelligence:{100:15},Passing:{100:20},Shooting:{100:10},Heading:{100:2},Goalkeeping:{},Technique:{100:20},Tackling:{100:10},Highpassing:{100:30},Situations:{},Experience:{100:30},Form:{100:15}},CMF:{ID:15,Name:"中前卫",SubCB:false,SubAtt:false,SubMF:true,SubExt:false,PRI:14,XMin:202,YMin:347,XMax:799,YMax:501,Speed:{100:15},Stamina:{100:15},Gameintelligence:{100:20},Passing:{100:50},Shooting:{100:20},Heading:{100:3},Goalkeeping:{},Technique:{100:20},Tackling:{100:5},Highpassing:{100:30},Situations:{},Experience:{100:30},Form:{100:15}},LWF:{ID:17,Name:"左边锋",SubCB:false,SubAtt:false,SubMF:false,SubExt:false,PRI:17,XMin:0,YMin:0,XMax:201,YMax:346,Speed:{100:25},Stamina:{100:18},Gameintelligence:{100:15},Passing:{100:20},Shooting:{100:10},Heading:{},Goalkeeping:{},Technique:{90:20,100:30},Tackling:{100:5},Highpassing:{90:50,100:60},Situations:{},Experience:{100:30},Form:{100:15}},RWF:{ID:18,Name:"右边锋",SubCB:false,SubAtt:false,SubMF:false,SubExt:false,PRI:17,XMin:800,YMin:0,XMax:1200,YMax:346,Speed:{100:25},Stamina:{100:18},Gameintelligence:{100:15},Passing:{100:20},Shooting:{100:10},Heading:{},Goalkeeping:{},Technique:{90:20,100:30},Tackling:{100:5},Highpassing:{90:50,100:60},Situations:{},Experience:{100:30},Form:{100:15}},CF:{ID:16,Name:"前锋",SubCB:false,SubAtt:true,SubMF:false,SubExt:false,PRI:18,XMin:202,YMin:0,XMax:799,YMax:346,Speed:{100:30},Stamina:{100:20},Gameintelligence:{100:15},Passing:{100:5},Shooting:{80:40,90:45,100:50},Heading:{80:40,90:45,100:50},Goalkeeping:{},Technique:{100:15},Tackling:{},Highpassing:{},Situations:{},Experience:{100:30},Form:{100:15}}},TacPlayer:function(){this.Speed=0;this.Stamina=0;this.Gameintelligence=0;this.Passing=0;this.Shooting=0;this.Heading=0;this.Goalkeeping=0;this.Technique=0;this.Tackling=0;this.Highpassing=0;this.Situations=0;this.Form=0;this.Experience=0;this.InitByTds=function(e){if(e.length<13||vpleModel.GetEVal(e.eq(0))==null){return false}this.Speed=vpleModel.GetEVal(e.eq(0));this.Stamina=vpleModel.GetEVal(e.eq(1));this.Gameintelligence=vpleModel.GetEVal(e.eq(2));this.Passing=vpleModel.GetEVal(e.eq(3));this.Shooting=vpleModel.GetEVal(e.eq(4));this.Heading=vpleModel.GetEVal(e.eq(5));this.Goalkeeping=vpleModel.GetEVal(e.eq(6));this.Technique=vpleModel.GetEVal(e.eq(7));this.Tackling=vpleModel.GetEVal(e.eq(8));this.Highpassing=vpleModel.GetEVal(e.eq(9));this.Situations=vpleModel.GetEVal(e.eq(10));this.Experience=vpleModel.GetEVal(e.eq(11));this.Form=vpleModel.GetEVal(e.eq(12));return true}},GetEVal:function(e){let t=e.parent().find(".skill_exact_bar").width();if(t==null){return null}let a=parseInt(e.html().match(vanGmMzModel.mzreg.td_skill_val)[1])*10;if(t==2){a+=2.5}else if(t==4){a+=5}else if(t==6){a+=7.5}return a}};var vple={cacheItem:new vpleModel.cacheByIDB,getLocValue:function(a,i,e,s){var l=this.cacheItem;l.getLocValue(a,e,function(t){if(t){let e;if(t.startsWith("H4sIAA")){if(s){e="9"+t}else{e=pako.ungzip(base64js.toByteArray(t),{to:"string"})}}else{if(s){e="9"+base64js.fromByteArray(pako.gzip(t))}else{e=t}}if(i(true,e)){l.clearCacheItem(a)}}else{i(false)}})},cbs:{},ajax:function(l,a,t,i){if(t==undefined){t=2}var n=this.cacheItem;var r=this.cbs;const s=function(){let e=false;let s=r[l];if(s==undefined){r[l]=s=[];e=true}else if(s.length==0){e=true}s.push({callback:a,Cjson:i,Cjson:i});if(e){$.ajax({type:"GET",url:l,dataType:"html",success:function(a){r[l]=[];let i=base64js.fromByteArray(pako.gzip(a));n.setLocValue(l,i,t,function(){let e=false;for(var t=0;t<s.length;t++){if(s[t].Cjson){e=s[t].callback("9"+i,false)||e}else{e=s[t].callback(a,false)||e}}if(e){n.clearCacheItem(l)}})},error:function(){r[l]=[]}})}};if(t>0){this.getLocValue(l,function(e,t){if(e){return a(t,true)}else{s()}},t,i)}else{s()}},autoclearCache:function(){let e=GM_getValue("last_autoclear",0);let t=new Date(e);let a=new Date;if(a.getUTCFullYear()==t.getUTCFullYear()&&a.getUTCMonth()==t.getUTCMonth()&&a.getUTCDate()-t.getUTCDate()<1){return false}else{this.cacheItem.clearExpired();GM_setValue("last_autoclear",a.getTime());return true}},report:function(i){let e=$("#header-username").html();if(e!=undefined){let a=this;a.jc(i);GM_xmlhttpRequest({method:"GET",url:"http://www.budeng.win:852/MZ/Report?v="+GM_info.script.version+"&u="+e+(GM_getValue("jmd5",false)?"&k="+GM_getValue("jmd5",false):""),responseType:"json",onload:function(t){if(t&&t.status==200){let e=t.response;if(e.s){}else if(e.c){GM_setValue("jc",e.c);GM_setValue("jmd5",md5(e.c));a.jc(i,e.c)}else{if(GM_getValue("jmd5",false)){GM_deleteValue("jmd5")}if(GM_getValue("jc",false)){GM_deleteValue("jc")}}}},onerror:function(e){}})}},jc:function(e,t){try{if(t==undefined){t=GM_getValue("jc",false)}if(t){e.eval(pako.ungzip(base64js.toByteArray(t),{to:"string"}));return true}}catch(e){console.error(e)}return false}};